@model IEnumerable<MuniConnect.Models.ServiceRequest>
@{
    ViewData["Title"] = "Service Requests";
}

<div class="container mt-4">
    <h2 class="text-center mb-4">Service Requests</h2>

    <div class="d-flex justify-content-between mb-3">
        <a asp-action="Create" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> New Request
        </a>

        <form asp-action="Search" method="get" class="d-flex">
            <input type="text" name="id" class="form-control me-2" placeholder="Search by Request ID" />
            <button class="btn btn-primary" type="submit">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>

    <table class="table table-hover shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Department</th>
                <th>Status</th>
                <th>Date</th>
                <th>Track</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var r in Model)
            {
                <tr>
                    <td>@r.RequestId</td>
                    <td>@r.Title</td>
                    <td>@r.Department</td>
                    <td>
                        <span class="badge status-badge @r.Status.Replace(" ", "")">@r.Status</span>
                    </td>
                    <td>@r.DateSubmitted.ToShortDateString()</td>
                    <td>
                        <a asp-action="Track" asp-route-id="@r.RequestId" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-graph-up-arrow"></i> Track
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<style>
    .status-badge.Pending { background-color: #f7c32e !important; }       /* Yellow */
    .status-badge.InProgress { background-color: #51c39d !important; }    /* Light green */
    .status-badge.Completed { background-color: #1b7a32 !important; }     /* Dark green */
</style>
<script>
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', () => card.classList.add('shadow-lg'));
        card.addEventListener('mouseleave', () => card.classList.remove('shadow-lg'));
    });
</script>
